<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:mapsui="clr-namespace:Mapsui.UI.Maui;assembly=Mapsui.UI.Maui"
             x:Class="FoodStreetMobile.MainPage"
             Title="Vinh Khanh Food Street">

    <Grid RowDefinitions="*,Auto" RowSpacing="0">
        <mapsui:MapView x:Name="PoiMap" />

        <Border Grid.Row="1"
                Stroke="#E5E7EB"
                BackgroundColor="#FFFFFF"
                Padding="12"
                StrokeShape="RoundRectangle 14">
            <VerticalStackLayout Spacing="10">
                <Label Text="{Binding StatusText}"
                       FontSize="14"
                       TextColor="#374151" />

                <CollectionView ItemsSource="{Binding Pois}"
                                HeightRequest="240">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="10"
                                    Stroke="#E5E7EB"
                                    BackgroundColor="#F9FAFB"
                                    StrokeShape="RoundRectangle 10"
                                    Margin="0,6">
                                <Border.Triggers>
                                    <DataTrigger TargetType="Border"
                                                 Binding="{Binding IsActive}"
                                                 Value="True">
                                        <Setter Property="BackgroundColor" Value="#FFF3C4" />
                                        <Setter Property="Stroke" Value="#D97706" />
                                    </DataTrigger>
                                </Border.Triggers>

                                <VerticalStackLayout Spacing="4">
                                    <Grid ColumnDefinitions="*,Auto">
                                        <Label Text="{Binding Name}"
                                               FontAttributes="Bold"
                                               TextColor="#111827" />
                                        <Label Grid.Column="1"
                                               Text="{Binding DistanceText}"
                                               TextColor="#6B7280" />
                                    </Grid>
                                    <Label Text="{Binding NarrationPreview}"
                                           FontSize="12"
                                           TextColor="#6B7280" />
                                </VerticalStackLayout>
                            </Border>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <Button Text="{Binding TrackingButtonText}"
                        Command="{Binding ToggleTrackingCommand}"
                        BackgroundColor="#111827"
                        TextColor="#FFFFFF" />
            </VerticalStackLayout>
        </Border>
    </Grid>

</ContentPage>
